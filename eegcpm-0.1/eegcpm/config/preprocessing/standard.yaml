# Standard Preprocessing Configuration
# Full pipeline with ASR + ICA
#
# Pipeline: Highpass → Bad Channels → Zapline → Lowpass → ASR → ICA → ICLabel → Reference
#
preprocessing:
  steps:
  - name: montage
    params:
      type: standard_1020
      on_missing: warn
  - name: filter
    params:
      l_freq: 1.0
      h_freq: null  # Highpass only - lowpass comes after Zapline
      method: fir
      fir_window: hamming
      phase: zero
  - name: drop_flat
    params:
      variance_threshold: 1.0e-15
  - name: bad_channels
    params:
      method: prep
      drop: true
  - name: zapline
    params:
      fline: null
      adaptive: true
      noiseCompDetectSigma: 2.5
      fixedNremove: 2
  - name: lowpass
    params:
      h_freq: 40.0
      method: fir
      phase: zero
  - name: asr
    params:
      cutoff: 20
      mode: single
      method: eegprep
      train_duration: 60.0
  - name: ica
    params:
      method: fastica
      n_components: rank-1
      random_state: 42
      l_freq_fit: 1.0
      auto_detect_artifacts: true
      reject_by_annotation: true
  - name: iclabel
    params:
      threshold: 0.8
      reject_labels:
      - eye
      - muscle
      remove_components: true
  - name: reference
    params:
      type: average
      projection: true
